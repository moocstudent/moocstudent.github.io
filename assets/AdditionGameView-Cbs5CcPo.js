import{d as q,r as a,k as F,m as L,s as O,c as d,a as e,t as o,v as $,x as P,b as j,y as H,z as J,q as W,p as X,i as Y,l as Z,n as ee,u as te,o as m,_ as B,e as V,f as I}from"./index-CtTQSX_b.js";import{G as se}from"./GameNavigation-Br3GJ998.js";const ae={class:"addition-game"},oe={class:"game-header"},ne={class:"game-stats"},le={class:"score"},ie={class:"time"},ue={class:"level"},ce={key:0,class:"game-start"},re={class:"start-content"},ve={class:"difficulty-select"},de={key:1,class:"game-play"},me={class:"question-container"},fe={class:"question"},pe={class:"answer-input"},_e={class:"progress-bar"},ge={key:0,class:"feedback"},he={key:2,class:"game-over"},ye={class:"game-over-content"},be={class:"final-stats"},ke={class:"final-score"},we=q({__name:"AdditionGame",setup(z){const A=te(),f=a(!1),c=a(!1),i=a("medium"),n=a(0),u=a(60),l=a(1),p=a(0),h=a(0),y=a(0),w=a(0),G=a(0),_=a(""),b=a(!1),x=a(!1),k=a("");let r=null,g=null;const T={easy:{min:1,max:10,time:60},medium:{min:1,max:50,time:60},hard:{min:1,max:100,time:60}},D=F(()=>{const s=T[i.value];return(s.time-u.value)/s.time*100}),N=()=>{const s=T[i.value];w.value=Math.floor(Math.random()*(s.max-s.min+1))+s.min,G.value=Math.floor(Math.random()*(s.max-s.min+1))+s.min,_.value="",h.value++},C=()=>{var M,S;const s=(S=(M=_.value)==null?void 0:M.toString())==null?void 0:S.trim();if(!s)return;const t=w.value+G.value,v=parseInt(s);isNaN(v)||(v===t?(x.value=!0,k.value="✅ 正确！",n.value+=10*l.value,p.value++,p.value%5===0&&(l.value++,k.value+=` 升级到 ${l.value} 级！`)):(x.value=!1,k.value=`❌ 错误！正确答案是 ${t}`,n.value=Math.max(0,n.value-5)),b.value=!0,g&&clearTimeout(g),g=setTimeout(()=>{b.value=!1,N()},1500))},Q=()=>{f.value=!0,c.value=!1,n.value=0,l.value=1,p.value=0,h.value=0,y.value=0;const s=T[i.value];u.value=s.time,N(),U()},U=()=>{r=setInterval(()=>{u.value--,y.value++,u.value<=0&&K()},1e3)},K=()=>{r&&(clearInterval(r),r=null),c.value=!0,Z.addGameRecord({gameType:"addition",gameName:"加法挑战",score:n.value,level:l.value,correctAnswers:p.value,totalQuestions:h.value,totalTime:y.value,difficulty:i.value}),ee.checkAchievements()},R=()=>{f.value=!1,c.value=!1,_.value="",b.value=!1},E=()=>{A.push("/games")};return L(()=>{f.value&&!c.value&&setTimeout(()=>{const s=document.querySelector("input");s&&s.focus()},100)}),O(()=>{r&&clearInterval(r),g&&clearTimeout(g)}),(s,t)=>(m(),d("div",ae,[e("div",oe,[t[2]||(t[2]=e("h2",null,"➕ 加法挑战",-1)),e("div",ne,[e("span",le,"得分: "+o(n.value),1),e("span",ie,"时间: "+o(u.value)+"s",1),e("span",ue,"等级: "+o(l.value),1)])]),f.value?c.value?(m(),d("div",he,[e("div",ye,[t[8]||(t[8]=e("h3",null,"游戏结束！",-1)),e("div",be,[e("p",null,[t[7]||(t[7]=Y("最终得分: ",-1)),e("span",ke,o(n.value),1)]),e("p",null,"正确题目: "+o(p.value)+"/"+o(h.value),1),e("p",null,"用时: "+o(y.value)+"秒",1)]),e("div",{class:"game-actions"},[e("button",{class:"btn btn-primary",onClick:R},"再玩一次"),e("button",{class:"btn btn-secondary",onClick:E},"返回游戏列表")])])])):(m(),d("div",de,[e("div",me,[e("div",fe,o(w.value)+" + "+o(G.value)+" = ?",1),e("div",pe,[$(e("input",{"onUpdate:modelValue":t[1]||(t[1]=v=>_.value=v),type:"number",placeholder:"输入答案",onKeyup:J(C,["enter"]),ref:"answerInput",autofocus:""},null,544),[[H,_.value]]),e("button",{class:"btn btn-primary",onClick:C},"确认")])]),e("div",_e,[e("div",{class:"progress",style:W({width:D.value+"%"})},null,4)]),b.value?(m(),d("div",ge,[e("div",{class:X(["feedback-message",x.value?"correct":"incorrect"])},o(k.value),3)])):j("",!0)])):(m(),d("div",ce,[e("div",re,[t[5]||(t[5]=e("h3",null,"准备开始加法挑战！",-1)),t[6]||(t[6]=e("p",null,"在限定时间内，快速计算加法题目",-1)),e("div",ve,[t[4]||(t[4]=e("label",null,"选择难度:",-1)),$(e("select",{"onUpdate:modelValue":t[0]||(t[0]=v=>i.value=v)},[...t[3]||(t[3]=[e("option",{value:"easy"},"简单 (1-10)",-1),e("option",{value:"medium"},"中等 (1-50)",-1),e("option",{value:"hard"},"困难 (1-100)",-1)])],512),[[P,i.value]])]),e("button",{class:"btn btn-primary",onClick:Q},"开始游戏")])]))]))}}),Ge=B(we,[["__scopeId","data-v-4ef11b62"]]),xe=q({name:"AdditionGameView",components:{AdditionGame:Ge,GameNavigation:se}}),Te={class:"addition-game-view"},Ae={class:"game-content"};function Ne(z,A,f,c,i,n){const u=I("GameNavigation"),l=I("AdditionGame");return m(),d("div",Te,[V(u,{gameTitle:"➕ 加法挑战"}),e("div",Ae,[V(l)])])}const Se=B(xe,[["render",Ne],["__scopeId","data-v-d8690811"]]);export{Se as default};
//# sourceMappingURL=AdditionGameView-Cbs5CcPo.js.map
