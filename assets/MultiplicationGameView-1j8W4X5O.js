import{d as D,r as s,k as P,m as j,s as H,c as u,a as e,t as l,v as I,x as J,b as A,y as W,z as X,q as Y,p as q,F as Z,g as ee,i as te,l as ae,n as se,u as le,o as c,_ as F,e as B,f as z}from"./index-CtTQSX_b.js";import{G as oe}from"./GameNavigation-Br3GJ998.js";const ne={class:"multiplication-game"},ie={class:"game-header"},ue={class:"game-stats"},ce={class:"score"},re={class:"time"},ve={class:"level"},me={key:0,class:"game-start"},de={class:"start-content"},pe={class:"difficulty-select"},fe={key:1,class:"game-play"},_e={class:"question-container"},ge={class:"question"},he={class:"answer-input"},be={class:"progress-bar"},ye={key:0,class:"feedback"},ke={key:1,class:"multiplication-table"},we={class:"table-grid"},Me={class:"table-cell"},Ge={class:"table-cell"},Te={key:2,class:"game-over"},xe={class:"game-over-content"},Ne={class:"final-stats"},Ce={class:"final-score"},Se=D({__name:"MultiplicationGame",setup(Q){const N=le(),_=s(!1),m=s(!1),r=s("medium"),n=s(0),v=s(60),i=s(1),g=s(0),y=s(0),k=s(0),d=s(0),p=s(0),h=s(""),w=s(!1),G=s(!1),M=s(""),T=s(!1);let f=null,b=null;const x={easy:{min:1,max:5,time:60},medium:{min:1,max:9,time:60},hard:{min:1,max:12,time:60}},U=P(()=>{const a=x[r.value];return(a.time-v.value)/a.time*100}),C=()=>{const a=x[r.value];d.value=Math.floor(Math.random()*(a.max-a.min+1))+a.min,p.value=Math.floor(Math.random()*(a.max-a.min+1))+a.min,h.value="",y.value++,T.value=!0},S=()=>{var $,V;const a=(V=($=h.value)==null?void 0:$.toString())==null?void 0:V.trim();if(!a)return;const t=d.value*p.value,o=parseInt(a);isNaN(o)||(o===t?(G.value=!0,M.value="✅ 正确！",n.value+=10*i.value,g.value++,g.value%5===0&&(i.value++,M.value+=` 升级到 ${i.value} 级！`)):(G.value=!1,M.value=`❌ 错误！正确答案是 ${t}`,n.value=Math.max(0,n.value-5)),w.value=!0,b&&clearTimeout(b),b=setTimeout(()=>{w.value=!1,C()},1500))},K=()=>{_.value=!0,m.value=!1,n.value=0,i.value=1,g.value=0,y.value=0,k.value=0;const a=x[r.value];v.value=a.time,C(),L()},L=()=>{f=setInterval(()=>{v.value--,k.value++,v.value<=0&&R()},1e3)},R=()=>{f&&(clearInterval(f),f=null),m.value=!0,ae.addGameRecord({gameType:"multiplication",gameName:"乘法表",score:n.value,level:i.value,correctAnswers:g.value,totalQuestions:y.value,totalTime:k.value,difficulty:r.value}),se.checkAchievements()},E=()=>{_.value=!1,m.value=!1,h.value="",w.value=!1,T.value=!1},O=()=>{N.push("/games")};return j(()=>{_.value&&!m.value&&setTimeout(()=>{const a=document.querySelector("input");a&&a.focus()},100)}),H(()=>{f&&clearInterval(f),b&&clearTimeout(b)}),(a,t)=>(c(),u("div",ne,[e("div",ie,[t[2]||(t[2]=e("h2",null,"✖️ 乘法表",-1)),e("div",ue,[e("span",ce,"得分: "+l(n.value),1),e("span",re,"时间: "+l(v.value)+"s",1),e("span",ve,"等级: "+l(i.value),1)])]),_.value?m.value?(c(),u("div",Te,[e("div",xe,[t[9]||(t[9]=e("h3",null,"游戏结束！",-1)),e("div",Ne,[e("p",null,[t[8]||(t[8]=te("最终得分: ",-1)),e("span",Ce,l(n.value),1)]),e("p",null,"正确题目: "+l(g.value)+"/"+l(y.value),1),e("p",null,"用时: "+l(k.value)+"秒",1)]),e("div",{class:"game-actions"},[e("button",{class:"btn btn-primary",onClick:E},"再玩一次"),e("button",{class:"btn btn-secondary",onClick:O},"返回游戏列表")])])])):(c(),u("div",fe,[e("div",_e,[e("div",ge,l(d.value)+" × "+l(p.value)+" = ?",1),e("div",he,[I(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>h.value=o),type:"number",placeholder:"输入答案",onKeyup:X(S,["enter"]),ref:"answerInput",autofocus:""},null,544),[[W,h.value]]),e("button",{class:"btn btn-primary",onClick:S},"确认")])]),e("div",be,[e("div",{class:"progress",style:Y({width:U.value+"%"})},null,4)]),w.value?(c(),u("div",ye,[e("div",{class:q(["feedback-message",G.value?"correct":"incorrect"])},l(M.value),3)])):A("",!0),T.value?(c(),u("div",ke,[t[7]||(t[7]=e("h4",null,"乘法表提示",-1)),e("div",we,[(c(),u(Z,null,ee(5,o=>e("div",{key:o,class:q(["table-row",{highlight:o===d.value||o===p.value}])},[e("span",Me,l(o)+" × "+l(d.value)+" = "+l(o*d.value),1),e("span",Ge,l(o)+" × "+l(p.value)+" = "+l(o*p.value),1)],2)),64))])])):A("",!0)])):(c(),u("div",me,[e("div",de,[t[5]||(t[5]=e("h3",null,"准备开始乘法表挑战！",-1)),t[6]||(t[6]=e("p",null,"通过游戏化的方式学习乘法表，从简单到复杂",-1)),e("div",pe,[t[4]||(t[4]=e("label",null,"选择难度:",-1)),I(e("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>r.value=o)},[...t[3]||(t[3]=[e("option",{value:"easy"},"简单 (1-5)",-1),e("option",{value:"medium"},"中等 (1-9)",-1),e("option",{value:"hard"},"困难 (1-12)",-1)])],512),[[J,r.value]])]),e("button",{class:"btn btn-primary",onClick:K},"开始游戏")])]))]))}}),$e=F(Se,[["__scopeId","data-v-72998911"]]),Ve=D({name:"MultiplicationGameView",components:{MultiplicationGame:$e,GameNavigation:oe}}),Ie={class:"multiplication-game-view"},Ae={class:"game-content"};function qe(Q,N,_,m,r,n){const v=z("GameNavigation"),i=z("MultiplicationGame");return c(),u("div",Ie,[B(v,{gameTitle:"✖️ 乘法表"}),e("div",Ae,[B(i)])])}const De=F(Ve,[["render",qe],["__scopeId","data-v-b74d0d5b"]]);export{De as default};
//# sourceMappingURL=MultiplicationGameView-1j8W4X5O.js.map
