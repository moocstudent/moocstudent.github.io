import{d as z,r as s,k as L,m as O,s as P,c as r,a as e,t as o,v as I,x as j,b as A,y as J,z as W,q as X,p as Y,i as Z,l as ee,n as te,u as ae,o as v,_ as D,e as q,f as B}from"./index-D4dZDW7N.js";import{G as se}from"./GameNavigation-0z4dkMUB.js";const oe={class:"subtraction-game"},ne={class:"game-header"},le={class:"game-stats"},ue={class:"score"},ie={class:"time"},ce={class:"level"},re={key:0,class:"game-start"},ve={class:"start-content"},me={class:"difficulty-select"},de={key:1,class:"game-play"},fe={class:"question-container"},pe={class:"question"},_e={class:"answer-input"},ge={class:"progress-bar"},he={key:0,class:"feedback"},be={key:1,class:"hint"},ye={key:2,class:"game-over"},ke={class:"game-over-content"},we={class:"final-stats"},Se={class:"final-score"},Ge=z({__name:"SubtractionGame",setup(Q){const x=ae(),p=s(!1),m=s(!1),u=s("medium"),n=s(0),i=s(60),l=s(1),_=s(0),b=s(0),y=s(0),c=s(0),k=s(0),g=s(""),w=s(!1),M=s(!1),S=s(""),G=s(!1);let d=null,h=null;const T={easy:{min:1,max:20,time:60},medium:{min:1,max:50,time:60},hard:{min:1,max:100,time:60}},U=L(()=>{const a=T[u.value];return(a.time-i.value)/a.time*100}),N=()=>{const a=T[u.value];c.value=Math.floor(Math.random()*(a.max-a.min+1))+a.min,k.value=Math.floor(Math.random()*(c.value-a.min+1))+a.min,Math.random()<.2&&c.value<20&&(c.value=Math.floor(Math.random()*10)+10,k.value=Math.floor(Math.random()*(c.value-10))+10),g.value="",b.value++,G.value=!0,setTimeout(()=>{G.value=!1},3e3)},C=()=>{var $,V;const a=(V=($=g.value)==null?void 0:$.toString())==null?void 0:V.trim();if(!a)return;const t=c.value-k.value,f=parseInt(a);isNaN(f)||(f===t?(M.value=!0,S.value="âœ… æ­£ç¡®ï¼",n.value+=10*l.value,_.value++,_.value%5===0&&(l.value++,S.value+=` å‡çº§åˆ° ${l.value} çº§ï¼`)):(M.value=!1,S.value=`âŒ é”™è¯¯ï¼æ­£ç¡®ç­”æ¡ˆæ˜¯ ${t}`,n.value=Math.max(0,n.value-5)),w.value=!0,h&&clearTimeout(h),h=setTimeout(()=>{w.value=!1,N()},1500))},K=()=>{p.value=!0,m.value=!1,n.value=0,l.value=1,_.value=0,b.value=0,y.value=0;const a=T[u.value];i.value=a.time,N(),R()},R=()=>{d=setInterval(()=>{i.value--,y.value++,i.value<=0&&E()},1e3)},E=()=>{d&&(clearInterval(d),d=null),m.value=!0,ee.addGameRecord({gameType:"subtraction",gameName:"å‡æ³•å¤§å¸ˆ",score:n.value,level:l.value,correctAnswers:_.value,totalQuestions:b.value,totalTime:y.value,difficulty:u.value}),te.checkAchievements()},F=()=>{p.value=!1,m.value=!1,g.value="",w.value=!1,G.value=!1},H=()=>{x.push("/games")};return O(()=>{p.value&&!m.value&&setTimeout(()=>{const a=document.querySelector("input");a&&a.focus()},100)}),P(()=>{d&&clearInterval(d),h&&clearTimeout(h)}),(a,t)=>(v(),r("div",oe,[e("div",ne,[t[2]||(t[2]=e("h2",null,"â– å‡æ³•å¤§å¸ˆ",-1)),e("div",le,[e("span",ue,"å¾—åˆ†: "+o(n.value),1),e("span",ie,"æ—¶é—´: "+o(i.value)+"s",1),e("span",ce,"ç­‰çº§: "+o(l.value),1)])]),p.value?m.value?(v(),r("div",ye,[e("div",ke,[t[9]||(t[9]=e("h3",null,"æ¸¸æˆç»“æŸï¼",-1)),e("div",we,[e("p",null,[t[8]||(t[8]=Z("æœ€ç»ˆå¾—åˆ†: ",-1)),e("span",Se,o(n.value),1)]),e("p",null,"æ­£ç¡®é¢˜ç›®: "+o(_.value)+"/"+o(b.value),1),e("p",null,"ç”¨æ—¶: "+o(y.value)+"ç§’",1)]),e("div",{class:"game-actions"},[e("button",{class:"btn btn-primary",onClick:F},"å†ç©ä¸€æ¬¡"),e("button",{class:"btn btn-secondary",onClick:H},"è¿”å›æ¸¸æˆåˆ—è¡¨")])])])):(v(),r("div",de,[e("div",fe,[e("div",pe,o(c.value)+" - "+o(k.value)+" = ?",1),e("div",_e,[I(e("input",{"onUpdate:modelValue":t[1]||(t[1]=f=>g.value=f),type:"number",placeholder:"è¾“å…¥ç­”æ¡ˆ",onKeyup:W(C,["enter"]),ref:"answerInput",autofocus:""},null,544),[[J,g.value]]),e("button",{class:"btn btn-primary",onClick:C},"ç¡®è®¤")])]),e("div",ge,[e("div",{class:"progress",style:X({width:U.value+"%"})},null,4)]),w.value?(v(),r("div",he,[e("div",{class:Y(["feedback-message",M.value?"correct":"incorrect"])},o(S.value),3)])):A("",!0),G.value?(v(),r("div",be,[...t[7]||(t[7]=[e("p",null,"ğŸ’¡ æç¤º: å¦‚æœç»“æœå°äº0ï¼Œè¾“å…¥è´Ÿæ•°",-1)])])):A("",!0)])):(v(),r("div",re,[e("div",ve,[t[5]||(t[5]=e("h3",null,"å‡†å¤‡å¼€å§‹å‡æ³•æŒ‘æˆ˜ï¼",-1)),t[6]||(t[6]=e("p",null,"æŒæ¡å‡æ³•è¿ç®—ï¼Œæå‡æ•°å­¦æ€ç»´",-1)),e("div",me,[t[4]||(t[4]=e("label",null,"é€‰æ‹©éš¾åº¦:",-1)),I(e("select",{"onUpdate:modelValue":t[0]||(t[0]=f=>u.value=f)},[...t[3]||(t[3]=[e("option",{value:"easy"},"ç®€å• (1-20)",-1),e("option",{value:"medium"},"ä¸­ç­‰ (1-50)",-1),e("option",{value:"hard"},"å›°éš¾ (1-100)",-1)])],512),[[j,u.value]])]),e("button",{class:"btn btn-primary",onClick:K},"å¼€å§‹æ¸¸æˆ")])]))]))}}),Me=D(Ge,[["__scopeId","data-v-ce00ec9c"]]),Te=z({name:"SubtractionGameView",components:{SubtractionGame:Me,GameNavigation:se}}),xe={class:"subtraction-game-view"},Ne={class:"game-content"};function Ce(Q,x,p,m,u,n){const i=B("GameNavigation"),l=B("SubtractionGame");return v(),r("div",xe,[q(i,{gameTitle:"â– å‡æ³•å¤§å¸ˆ"}),e("div",Ne,[q(l)])])}const Ie=D(Te,[["render",Ce],["__scopeId","data-v-853dc426"]]);export{Ie as default};
//# sourceMappingURL=SubtractionGameView-7_NDjUo4.js.map
