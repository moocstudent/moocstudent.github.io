import{d as j,r as o,k as se,m as ne,s as le,c as v,a as e,t as l,v as I,x as O,b as R,y as E,z as H,q as re,p as ie,i as ue,l as ve,n as ce,u as me,o as c,_ as J,e as L,f as P}from"./index-D4dZDW7N.js";import{G as de}from"./GameNavigation-0z4dkMUB.js";const fe={class:"fraction-game"},pe={class:"game-header"},_e={class:"game-stats"},he={class:"score"},ge={class:"time"},ye={class:"level"},be={key:0,class:"game-start"},ke={class:"start-content"},xe={class:"difficulty-select"},we={key:1,class:"game-play"},$e={class:"question-container"},Me={class:"question"},Te={key:0,class:"visual-fraction"},De={class:"fraction-display"},Ge={class:"numerator"},Ce={class:"denominator"},Se={class:"operator"},Ve={class:"fraction-display"},Fe={class:"numerator"},Ie={class:"denominator"},Ne={class:"answer-input"},qe={key:1,class:"compare-fraction"},Ae={class:"fraction-pair"},Ue={class:"fraction-display"},Be={class:"numerator"},ze={class:"denominator"},Ke={class:"compare-operator"},Qe={class:"fraction-display"},Oe={class:"numerator"},Re={class:"denominator"},Ee={key:2,class:"text-question"},He={class:"answer-input"},Le={class:"progress-bar"},Pe={key:0,class:"feedback"},je={key:1,class:"hint"},Je={key:2,class:"game-over"},We={class:"game-over-content"},Xe={class:"final-stats"},Ye={class:"final-score"},Ze=j({__name:"FractionGame",setup(W){const B=me(),$=o(!1),k=o(!1),m=o("medium"),d=o(0),g=o(60),f=o(1),M=o(0),G=o(0),C=o(0),p=o("visual"),s=o({numerator:0,denominator:1}),r=o({numerator:0,denominator:1}),x=o("+"),N=o(""),y=o(""),_=o(""),S=o(!1),q=o(!1),T=o(""),V=o(!1),F=o("");let w=null,D=null;const A={easy:{time:60,maxDenominator:6},medium:{time:60,maxDenominator:10},hard:{time:60,maxDenominator:12}},X=se(()=>{const t=A[m.value];return(t.time-g.value)/t.time*100}),z=()=>{const t=A[m.value];if(m.value==="easy")p.value="visual",s.value=h(t.maxDenominator),r.value=h(t.maxDenominator),x.value="+",F.value="è§‚å¯Ÿåˆ†å­å’Œåˆ†æ¯ï¼Œç†è§£åˆ†æ•°çš„å«ä¹‰";else if(m.value==="medium")p.value="compare",s.value=h(t.maxDenominator),r.value=h(t.maxDenominator),F.value="æ¯”è¾ƒä¸¤ä¸ªåˆ†æ•°çš„å¤§å°ï¼Œå¯ä»¥è½¬æ¢ä¸ºå°æ•°";else{p.value="text";const a=["+","-","Ã—","Ã·"];if(x.value=a[Math.floor(Math.random()*a.length)],x.value==="Ã·"){const n=h(t.maxDenominator),i=h(t.maxDenominator);s.value={numerator:n.numerator*i.denominator,denominator:n.denominator*i.numerator},r.value=i,N.value=`è®¡ç®— ${s.value.numerator}/${s.value.denominator} Ã· ${r.value.numerator}/${r.value.denominator}`}else s.value=h(t.maxDenominator),r.value=h(t.maxDenominator),N.value=`è®¡ç®— ${s.value.numerator}/${s.value.denominator} ${x.value} ${r.value.numerator}/${r.value.denominator}`;F.value="å…ˆé€šåˆ†ï¼Œå†è¿›è¡Œè¿ç®—ï¼Œæœ€åçº¦åˆ†"}y.value="",_.value="",G.value++,V.value=!0,setTimeout(()=>{V.value=!1},4e3)},h=t=>{const a=Math.floor(Math.random()*(t-1))+2;return{numerator:Math.floor(Math.random()*a)+1,denominator:a}},U=()=>{var a,n;let t=!1;if(p.value==="compare"){if(!_.value)return;const i=s.value.numerator/s.value.denominator,u=r.value.numerator/r.value.denominator;(_.value===">"&&i>u||_.value==="="&&Math.abs(i-u)<.001||_.value==="<"&&i<u)&&(t=!0)}else{const i=(n=(a=y.value)==null?void 0:a.toString())==null?void 0:n.trim();if(!i)return;const u=i.match(/^(\d+)\/(\d+)$/);if(u){const b=parseInt(u[1]),K=parseInt(u[2]);if(p.value==="visual")t=b===s.value.numerator&&K===s.value.denominator;else{const Q=Y();t=b===Q.numerator&&K===Q.denominator}}}if(t)q.value=!0,T.value="âœ… æ­£ç¡®ï¼",d.value+=10*f.value,M.value++,M.value%5===0&&(f.value++,T.value+=` å‡çº§åˆ° ${f.value} çº§ï¼`);else{if(q.value=!1,p.value==="compare"){const i=s.value.numerator/s.value.denominator,u=r.value.numerator/r.value.denominator;let b="";i>u?b=">":Math.abs(i-u)<.001?b="=":b="<",T.value=`âŒ é”™è¯¯ï¼æ­£ç¡®ç­”æ¡ˆæ˜¯ ${b}`}else T.value="âŒ é”™è¯¯ï¼è¯·æ£€æŸ¥ä½ çš„ç­”æ¡ˆ";d.value=Math.max(0,d.value-5)}S.value=!0,D&&clearTimeout(D),D=setTimeout(()=>{S.value=!1,z()},2e3)},Y=()=>{const t=s.value.numerator/s.value.denominator,a=r.value.numerator/r.value.denominator;let n=0;switch(x.value){case"+":n=t+a;break;case"-":n=t-a;break;case"Ã—":n=t*a;break;case"Ã·":n=t/a;break}const i=100;return{numerator:Math.round(n*i),denominator:i}},Z=()=>{$.value=!0,k.value=!1,d.value=0,f.value=1,M.value=0,G.value=0,C.value=0;const t=A[m.value];g.value=t.time,z(),ee()},ee=()=>{w=setInterval(()=>{g.value--,C.value++,g.value<=0&&ae()},1e3)},ae=()=>{w&&(clearInterval(w),w=null),k.value=!0,ve.addGameRecord({gameType:"fractions",gameName:"åˆ†æ•°æ¸¸æˆ",score:d.value,level:f.value,correctAnswers:M.value,totalQuestions:G.value,totalTime:C.value,difficulty:m.value}),ce.checkAchievements()},te=()=>{$.value=!1,k.value=!1,y.value="",_.value="",S.value=!1,V.value=!1},oe=()=>{B.push("/games")};return ne(()=>{$.value&&!k.value&&setTimeout(()=>{const t=document.querySelector("input");t&&t.focus()},100)}),le(()=>{w&&clearInterval(w),D&&clearTimeout(D)}),(t,a)=>(c(),v("div",fe,[e("div",pe,[a[4]||(a[4]=e("h2",null,"ğŸ”¢ åˆ†æ•°æ¸¸æˆ",-1)),e("div",_e,[e("span",he,"å¾—åˆ†: "+l(d.value),1),e("span",ge,"æ—¶é—´: "+l(g.value)+"s",1),e("span",ye,"ç­‰çº§: "+l(f.value),1)])]),$.value?k.value?(c(),v("div",Je,[e("div",We,[a[16]||(a[16]=e("h3",null,"æ¸¸æˆç»“æŸï¼",-1)),e("div",Xe,[e("p",null,[a[15]||(a[15]=ue("æœ€ç»ˆå¾—åˆ†: ",-1)),e("span",Ye,l(d.value),1)]),e("p",null,"æ­£ç¡®é¢˜ç›®: "+l(M.value)+"/"+l(G.value),1),e("p",null,"ç”¨æ—¶: "+l(C.value)+"ç§’",1)]),e("div",{class:"game-actions"},[e("button",{class:"btn btn-primary",onClick:te},"å†ç©ä¸€æ¬¡"),e("button",{class:"btn btn-secondary",onClick:oe},"è¿”å›æ¸¸æˆåˆ—è¡¨")])])])):(c(),v("div",we,[e("div",$e,[e("div",Me,[p.value==="visual"?(c(),v("div",Te,[e("div",De,[e("div",Ge,l(s.value.numerator),1),a[9]||(a[9]=e("div",{class:"fraction-line"},"â”€",-1)),e("div",Ce,l(s.value.denominator),1)]),e("div",Se,l(x.value),1),e("div",Ve,[e("div",Fe,l(r.value.numerator),1),a[10]||(a[10]=e("div",{class:"fraction-line"},"â”€",-1)),e("div",Ie,l(r.value.denominator),1)]),a[11]||(a[11]=e("div",{class:"equals"},"=",-1)),e("div",Ne,[I(e("input",{"onUpdate:modelValue":a[1]||(a[1]=n=>y.value=n),type:"text",placeholder:"è¾“å…¥ç­”æ¡ˆ",onKeyup:H(U,["enter"]),ref:"answerInput",autofocus:""},null,544),[[E,y.value]])])])):p.value==="compare"?(c(),v("div",qe,[e("div",Ae,[e("div",Ue,[e("div",Be,l(s.value.numerator),1),a[12]||(a[12]=e("div",{class:"fraction-line"},"â”€",-1)),e("div",ze,l(s.value.denominator),1)]),e("div",Ke,[I(e("select",{"onUpdate:modelValue":a[2]||(a[2]=n=>_.value=n)},[...a[13]||(a[13]=[e("option",{value:""},"é€‰æ‹©",-1),e("option",{value:">"},">",-1),e("option",{value:"="},"=",-1),e("option",{value:"<"},"<",-1)])],512),[[O,_.value]])]),e("div",Qe,[e("div",Oe,l(r.value.numerator),1),a[14]||(a[14]=e("div",{class:"fraction-line"},"â”€",-1)),e("div",Re,l(r.value.denominator),1)])])])):(c(),v("div",Ee,[e("p",null,l(N.value),1),e("div",He,[I(e("input",{"onUpdate:modelValue":a[3]||(a[3]=n=>y.value=n),type:"text",placeholder:"è¾“å…¥ç­”æ¡ˆ (å¦‚: 3/4)",onKeyup:H(U,["enter"]),ref:"answerInput",autofocus:""},null,544),[[E,y.value]])])]))]),e("button",{class:"btn btn-primary",onClick:U},"ç¡®è®¤")]),e("div",Le,[e("div",{class:"progress",style:re({width:X.value+"%"})},null,4)]),S.value?(c(),v("div",Pe,[e("div",{class:ie(["feedback-message",q.value?"correct":"incorrect"])},l(T.value),3)])):R("",!0),V.value?(c(),v("div",je,[e("p",null,"ğŸ’¡ æç¤º: "+l(F.value),1)])):R("",!0)])):(c(),v("div",be,[e("div",ke,[a[7]||(a[7]=e("h3",null,"å‡†å¤‡å¼€å§‹åˆ†æ•°æŒ‘æˆ˜ï¼",-1)),a[8]||(a[8]=e("p",null,"é€šè¿‡å¯è§†åŒ–æ–¹å¼å­¦ä¹ åˆ†æ•°ï¼Œç†è§£åˆ†å­åˆ†æ¯çš„æ¦‚å¿µ",-1)),e("div",xe,[a[6]||(a[6]=e("label",null,"é€‰æ‹©éš¾åº¦:",-1)),I(e("select",{"onUpdate:modelValue":a[0]||(a[0]=n=>m.value=n)},[...a[5]||(a[5]=[e("option",{value:"easy"},"ç®€å• (åŸºæœ¬åˆ†æ•°)",-1),e("option",{value:"medium"},"ä¸­ç­‰ (åˆ†æ•°æ¯”è¾ƒ)",-1),e("option",{value:"hard"},"å›°éš¾ (åˆ†æ•°è¿ç®—)",-1)])],512),[[O,m.value]])]),e("button",{class:"btn btn-primary",onClick:Z},"å¼€å§‹æ¸¸æˆ")])]))]))}}),ea=J(Ze,[["__scopeId","data-v-5847bbe8"]]),aa=j({name:"FractionGameView",components:{FractionGame:ea,GameNavigation:de}}),ta={class:"fraction-game-view"},oa={class:"game-content"};function sa(W,B,$,k,m,d){const g=P("GameNavigation"),f=P("FractionGame");return c(),v("div",ta,[L(g,{gameTitle:"ğŸ”¢ åˆ†æ•°æ¸¸æˆ"}),e("div",oa,[L(f)])])}const ra=J(aa,[["render",sa],["__scopeId","data-v-1dd761af"]]);export{ra as default};
//# sourceMappingURL=FractionGameView-D5Z6iS2D.js.map
